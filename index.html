<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Cahier de Textes Interactif</title>
  
  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  
  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto+Slab:wght@300;400;500;600;700&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <!-- Fira Sans Condensed for cards -->
  <link href="https://fonts.googleapis.com/css2?family=Fira+Sans+Condensed:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <!-- Arabic font for Arabic text -->
  <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=IBM+Plex+Sans+Arabic:wght@400;500;600;700&family=Noto+Sans+Arabic:wght@400;500;600;700&display=swap" rel="stylesheet">
  <!-- Quicksand for h3 -->
  <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <!-- Poppins for modern UI -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <!-- Montserrat for headings -->
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet">
  
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
  
  <!-- Tippy.js for Tooltips -->
  <script src="https://unpkg.com/@popperjs/core@2"></script>
  <script src="https://unpkg.com/tippy.js@6"></script>
  
  <style>
    body { font-family: 'Inter', sans-serif; }
    h1, h2, h3, h4, h5, h6, .font-slab { font-family: 'Roboto Slab', serif; }
    .font-condensed { font-family: 'Fira Sans Condensed', sans-serif; }
    .font-ar { font-family: 'IBM Plex Sans Arabic'}
    .font-poppins { font-family: 'Poppins', sans-serif; }
    .font-montserrat { font-family: 'Montserrat', sans-serif; }

    /* Overrides demandés */
    h3 { 
      font-family: 'Quicksand', sans-serif; 
      font-size: 70%; /* Réduction de 30% de la taille du texte */
    }
    p { color: #22d3ee; } /* Cyan-400 - couleur vive et moderne */
    :lang(ar) { font-family: 'IBM Plex Sans Arabic' }
    
    /* Custom Tippy.js theme */
    .tippy-box[data-theme~='custom'] {
        background-color: #1f2937; /* slate-800 */
        color: white;
    }
    .tippy-box[data-theme~='custom'][data-placement^='top'] > .tippy-arrow::before {
        border-top-color: #1f2937;
    }
    .tippy-box[data-theme~='custom'][data-placement^='bottom'] > .tippy-arrow::before {
        border-bottom-color: #1f2937;
    }

    /* Tippy.js shift-away animation */
    .tippy-box[data-animation='shift-away'] {
      transition-property: transform, opacity;
      transition-duration: 250ms;
      transition-timing-function: ease-out;
    }
    .tippy-box[data-animation=shift-away][data-state=hidden]{opacity:0}
    .tippy-box[data-animation=shift-away][data-state=hidden][data-placement^=top]{transform:translateY(10px)}
    .tippy-box[data-animation=shift-away][data-state=hidden][data-placement^=bottom]{transform:translateY(-10px)}
    .tippy-box[data-animation=shift-away][data-state=hidden][data-placement^=left]{transform:translateX(10px)}
    .tippy-box[data-animation=shift-away][data-state=hidden][data-placement^=right]{transform:translateX(-10px)}
    
    /* Animation for modals and notifications */
    @keyframes slide-in-up {
      from { transform: translateY(20px) scale(0.98); opacity: 0; }
      to { transform: translateY(0) scale(1); opacity: 1; }
    }
    .animate-slide-in-up {
      animation: slide-in-up 0.3s ease-out forwards;
    }

    @keyframes fade-in {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    .animate-fade-in {
        animation: fade-in 0.2s ease-out;
    }


    /* Date cell animation */
    .date-cell-filled::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 3px;
      background-color: #0d9488; /* teal-600 */
      transform-origin: left;
      animation: draw-line-across 0.5s ease-out forwards;
    }

    @keyframes draw-line-across {
        from {
            transform: scaleX(0);
        }
        to {
            transform: scaleX(1);
        }
    }
    
    /* New item highlight animation */
    @keyframes highlight-fade-out {
      from { background-color: #cffafe; } /* cyan-100 */
      to { background-color: transparent; }
    }
    .new-item-highlight {
      animation: highlight-fade-out 2.5s ease-out forwards;
    }

    /* ===== NOUVELLES STYLES POUR LES CARTES ===== */
    
    /* Glassmorphism effect */
    .glass-effect {
      background: rgba(255, 255, 255, 0.05);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.1);
    }
    
    /* Modern card styles */
    .card-modern {
      background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
      border-radius: 16px;
      box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1);
      transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      overflow: hidden;
      position: relative;
    }
    
    .card-modern:hover {
      transform: translateY(-8px) scale(1.01);
      box-shadow: 0 20px 30px -10px rgba(0, 0, 0, 0.2), 0 15px 15px -10px rgba(0, 0, 0, 0.1);
    }
    
    .card-modern::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, rgba(59, 130, 246, 0.1) 0%, rgba(16, 185, 129, 0.1) 100%);
      opacity: 0;
      transition: opacity 0.4s ease;
    }
    
    .card-modern:hover::before {
      opacity: 1;
    }
    
    /* Badge styles */
    .badge-modern {
      background: linear-gradient(135deg, rgba(59, 130, 246, 0.2) 0%, rgba(16, 185, 129, 0.2) 100%);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 20px;
      padding: 0.35rem 0.85rem;
      font-family: 'Poppins', sans-serif;
      font-weight: 600;
      letter-spacing: 0.05em;
      text-transform: uppercase;
      font-size: 0.75rem;
      color: white;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      transition: all 0.3s ease;
    }
    
    .badge-modern:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    }
    
    /* Title styles */
    .title-modern {
      font-family: 'Montserrat', sans-serif;
      font-weight: 600;
      letter-spacing: -0.02em;
      background: linear-gradient(135deg, #ffffff 0%, #e2e8f0 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      text-fill-color: transparent;
      margin-bottom: 0.5rem;
      position: relative;
      z-index: 20;
    }
    
    /* Ensure sup elements are visible */
    .title-modern sup {
      -webkit-text-fill-color: white;
      text-fill-color: white;
      font-size: 0.7em;
      font-weight: 500;
      position: relative;
      top: -0.5em;
      margin-left: 1px;
      margin-right: 1px;
    }
    
    .title-ar {
      font-family: 'IBM Plex Sans Arabic';
      font-weight: 500;
      letter-spacing: 0;
    }
    
    /* Card animations */
    @keyframes card-pulse {
      0% { box-shadow: 0 0 0 0 rgba(16, 185, 129, 0.4); }
      70% { box-shadow: 0 0 0 10px rgba(16, 185, 129, 0); }
      100% { box-shadow: 0 0 0 0 rgba(16, 185, 129, 0); }
    }
    
    .card-pulse {
      animation: card-pulse 2s infinite;
    }
    
    /* Premium badge animation */
    @keyframes premium-glow {
      0% { box-shadow: 0 0 5px rgba(245, 158, 11, 0.5); }
      50% { box-shadow: 0 0 20px rgba(245, 158, 11, 0.8); }
      100% { box-shadow: 0 0 5px rgba(245, 158, 11, 0.5); }
    }
    
    .premium-badge {
      background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      width: 2rem;
      height: 2rem;
      animation: premium-glow 3s infinite;
      transition: all 0.3s ease;
    }
    
    .premium-badge:hover {
      transform: rotate(12deg) scale(1.1);
    }
    
    /* Last modified chip */
    .last-modified-chip {
      background: rgba(15, 23, 42, 0.6);
      backdrop-filter: blur(4px);
      -webkit-backdrop-filter: blur(4px);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 20px;
      padding: 0.25rem 0.75rem;
      font-size: 0.7rem;
      display: flex;
      align-items: center;
      gap: 0.35rem;
      transition: all 0.3s ease;
    }
    
    .last-modified-chip:hover {
      background: rgba(15, 23, 42, 0.8);
    }

    /* Print-specific styles */
    @media screen {
      .print-hidden { display: block !important; }
      .print-only { display: none !important; }
    }
    
    @media print {
      @page {
        size: A4;
        margin: 0.7cm;
      }
      
      /* Hide screen content */
      .print-hidden { 
        display: none !important; 
      }
      
      /* Show print content */
      .print-only { 
        display: block !important; 
      }
      
      /* Hide notifications and all interactive elements */
      .notification,
      [class*="notification"],
      .modal,
      [class*="modal"],
      .tooltip,
      [class*="tooltip"],
      .dropdown,
      [class*="dropdown"],
      button,
      input[type="button"],
      input[type="submit"] {
        display: none !important;
        visibility: hidden !important;
      }
      
      body {
        padding: 0 !important;
        margin: 0 !important;
        font-size: 9pt !important;
        line-height: 1.3 !important;
        background-color: white !important;
        color: black !important;
        -webkit-print-color-adjust: exact;
        print-color-adjust: exact;
      }

      /* S'assurer que les paragraphes s'impriment en noir */
      p { color: black !important; }
      
      /* Minimal global resets for print */
      *, *::before, *::after {
        box-shadow: none !important;
        outline: none !important;
        transform: none !important;
      }
      
      /* Reduce bottom margins and padding for compactness */
      div, p, h1, h2, h3, h4, h5, h6 {
        margin-bottom: 3px !important;
        padding-bottom: 2px !important;
      }
      
      /* Table styling */
      table {
        width: 100% !important;
        border-collapse: collapse !important;
        margin: 0 !important;
        padding: 0 !important;
        margin-bottom: 0 !important;
      }
      
      th, td {
        border: none !important;
        padding: 3px 6px !important;
        vertical-align: top !important;
        text-align: left !important;
        margin: 0 !important;
      }
      
      /* Ensure badges print properly with background colors */
      .bg-sky-200, [class*="bg-sky-200"] { background-color: #bae6fd !important; }
      .bg-emerald-100, [class*="bg-emerald-100"] { background-color: #d1fae5 !important; }
      .bg-amber-100, [class*="bg-amber-100"] { background-color: #fef3c7 !important; }
      .bg-indigo-100, [class*="bg-indigo-100"] { background-color: #e0e7ff !important; }
      .bg-purple-100, [class*="bg-purple-100"] { background-color: #f3e8ff !important; }
      .bg-yellow-100, [class*="bg-yellow-100"] { background-color: #fef9c3 !important; }
      .bg-slate-200, [class*="bg-slate-200"] { background-color: #e2e8f0 !important; }
      .bg-teal-100, [class*="bg-teal-100"] { background-color: #ccfbf1 !important; }
      .bg-orange-100, [class*="bg-orange-100"] { background-color: #ffedd5 !important; }
      .bg-cyan-100, [class*="bg-cyan-100"] { background-color: #cffafe !important; }
      .bg-blue-100, [class*="bg-blue-100"] { background-color: #dbeafe !important; }
      .bg-green-100, [class*="bg-green-100"] { background-color: #dcfce7 !important; }
      
      /* Content indentation with reduced spacing */
      .pl-4 { padding-left: 0.8rem !important; }
      .pl-8 { padding-left: 1.5rem !important; }
      .pl-12 { padding-left: 2.2rem !important; }
      
      /* Font styles */
      .text-sm { font-size: 8pt !important; }
      .font-bold { font-weight: bold !important; }
      .font-semibold { font-weight: 600 !important; }
      .italic { font-style: italic !important; }

      /* Highlight for newly added items in print */
      .new-item-print-highlight > td {
          background-color: #f0f9ff !important; /* sky-50, a subtle highlight */
      }
    }
  </style>

<script type="importmap">
{
  "imports": {
    "react/": "https://aistudiocdn.com/react@^19.1.1/",
    "react": "https://aistudiocdn.com/react@^19.1.1",
    "react-dom/": "https://aistudiocdn.com/react-dom@^19.1.1/",
    "immer": "https://aistudiocdn.com/immer@^10.1.1",
    "better-react-mathjax": "https://aistudiocdn.com/better-react-mathjax@^2.3.0"
  }
}
</script>
<link rel="stylesheet" href="/index.css">
</head>
<body class="bg-slate-50">
  <div id="root"></div>
  <script type="module" src="/index.tsx"></script>
</body>
</html>