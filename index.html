<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Cahier de Textes Interactif</title>
  
  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  
  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto+Slab:wght@300;400;500;600;700&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <!-- Fira Sans Condensed for cards -->
  <link href="https://fonts.googleapis.com/css2?family=Fira+Sans+Condensed:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <!-- Arabic font for Arabic text -->
  <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=IBM+Plex+Sans+Arabic:wght@400;500;600;700&family=Noto+Sans+Arabic:wght@400;500;600;700&display=swap" rel="stylesheet">
  <!-- Quicksand for h3 -->
  <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <!-- Poppins for modern UI -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <!-- Montserrat for headings -->
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet">
  
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
  
  <!-- Tippy.js for Tooltips -->
  <script src="https://unpkg.com/@popperjs/core@2"></script>
  <script src="https://unpkg.com/tippy.js@6"></script>
  
  <style>
    body { font-family: 'Inter', sans-serif; }
    h1, h2, h3, h4, h5, h6, .font-slab { font-family: 'Roboto Slab', serif; }
    .font-condensed { font-family: 'Fira Sans Condensed', sans-serif; }
    .font-ar { font-family: 'IBM Plex Sans Arabic'}
    .font-poppins { font-family: 'Poppins', sans-serif; }
    .font-montserrat { font-family: 'Montserrat', sans-serif; }

    /* Overrides demandés */
    h3 { 
      font-family: 'Quicksand', sans-serif; 
      font-size: 70%; /* Réduction de 30% de la taille du texte */
    }
    p { color: #000000; } /* Noir pour une meilleure lisibilité */
    :lang(ar) { font-family: 'IBM Plex Sans Arabic' }
    
    /* Custom Tippy.js theme */
    .tippy-box[data-theme~='custom'] {
        background-color: #1f2937; /* slate-800 */
        color: white;
    }
    .tippy-box[data-theme~='custom'][data-placement^='top'] > .tippy-arrow::before {
        border-top-color: #1f2937;
    }
    .tippy-box[data-theme~='custom'][data-placement^='bottom'] > .tippy-arrow::before {
        border-bottom-color: #1f2937;
    }

    /* Tippy.js shift-away animation */
    .tippy-box[data-animation='shift-away'] {
      transition-property: transform, opacity;
      transition-duration: 250ms;
      transition-timing-function: ease-out;
    }
    .tippy-box[data-animation=shift-away][data-state=hidden]{opacity:0}
    .tippy-box[data-animation=shift-away][data-state=hidden][data-placement^=top]{transform:translateY(10px)}
    .tippy-box[data-animation=shift-away][data-state=hidden][data-placement^=bottom]{transform:translateY(-10px)}
    .tippy-box[data-animation=shift-away][data-state=hidden][data-placement^=left]{transform:translateX(10px)}
    .tippy-box[data-animation=shift-away][data-state=hidden][data-placement^=right]{transform:translateX(-10px)}
    
    /* Animation for modals and notifications */
    @keyframes slide-in-up {
      from { transform: translateY(20px) scale(0.98); opacity: 0; }
      to { transform: translateY(0) scale(1); opacity: 1; }
    }
    .animate-slide-in-up {
      animation: slide-in-up 0.3s ease-out forwards;
    }

    @keyframes fade-in {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    .animate-fade-in {
        animation: fade-in 0.2s ease-out;
    }


    /* Date cell animation */
    .date-cell-filled::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 3px;
      background-color: #0d9488; /* teal-600 */
      transform-origin: left;
      animation: draw-line-across 0.5s ease-out forwards;
    }

    @keyframes draw-line-across {
        from {
            transform: scaleX(0);
        }
        to {
            transform: scaleX(1);
        }
    }
    
    /* New item highlight animation */
    @keyframes highlight-fade-out {
      from { background-color: #cffafe; } /* cyan-100 */
      to { background-color: transparent; }
    }
    .new-item-highlight {
      animation: highlight-fade-out 2.5s ease-out forwards;
    }

    /* ===== MATERIAL DESIGN CARD STYLES ===== */
    
    /* Material Design elevation shadows */
    .elevation-1 {
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24);
    }
    
    .elevation-2 {
      box-shadow: 0 3px 6px rgba(0, 0, 0, 0.16), 0 3px 6px rgba(0, 0, 0, 0.23);
    }
    
    .elevation-3 {
      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.19), 0 6px 6px rgba(0, 0, 0, 0.23);
    }
    
    /* Material Design card transitions */
    .material-card {
      transition: box-shadow 0.3s cubic-bezier(0.4, 0, 0.2, 1), transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    .material-card:hover {
      transform: translateY(-2px);
    }
    
    /* Material Design badge styles */
    .material-badge {
      display: inline-flex;
      align-items: center;
      padding: 0.25rem 0.75rem;
      border-radius: 9999px;
      font-size: 0.75rem;
      font-weight: 500;
      transition: all 0.2s ease;
    }
    
    .material-badge:hover {
      transform: translateY(-1px);
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    
    /* Material Design typography */
    .material-title {
      font-family: 'Roboto', 'Inter', sans-serif;
      font-weight: 500;
      letter-spacing: -0.01em;
      line-height: 1.2;
    }
    
    .material-title-ar {
      font-family: 'IBM Plex Sans Arabic', sans-serif;
      font-weight: 500;
      letter-spacing: 0;
      line-height: 1.3;
    }
    
    /* Material Design focus states */
    .material-focus:focus {
      outline: 2px solid #1976d2;
      outline-offset: 2px;
    }
    
    /* Material Design premium badge */
    .material-premium-badge {
      background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      width: 2rem;
      height: 2rem;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      transition: all 0.2s ease;
    }
    
    .material-premium-badge:hover {
      transform: scale(1.05);
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
    }
    
    /* Material Design info chip */
    .material-info-chip {
      background: rgba(255, 255, 255, 0.9);
      border: 1px solid rgba(0, 0, 0, 0.1);
      border-radius: 16px;
      padding: 0.25rem 0.75rem;
      font-size: 0.75rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
      transition: all 0.2s ease;
      backdrop-filter: blur(4px);
    }
    
    .material-info-chip:hover {
      background: rgba(255, 255, 255, 0.95);
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    /* Print-specific styles */
    @media screen {
      .print-hidden { display: block !important; }
      .print-only { display: none !important; }
    }
    
    @media print {
      @page {
        size: A4;
        margin: 0.7cm;
      }
      
      /* Hide screen content */
      .print-hidden { 
        display: none !important; 
      }
      
      /* Show print content */
      .print-only { 
        display: block !important; 
      }
      
      /* Hide notifications and all interactive elements */
      .notification,
      [class*="notification"],
      .modal,
      [class*="modal"],
      .tooltip,
      [class*="tooltip"],
      .dropdown,
      [class*="dropdown"],
      button,
      input[type="button"],
      input[type="submit"] {
        display: none !important;
        visibility: hidden !important;
      }
      
      body {
        padding: 0 !important;
        margin: 0 !important;
        font-size: 9pt !important;
        line-height: 1.3 !important;
        background-color: white !important;
        color: black !important;
        -webkit-print-color-adjust: exact;
        print-color-adjust: exact;
      }

      /* S'assurer que les paragraphes s'impriment en noir */
      p { color: black !important; }
      
      /* Minimal global resets for print */
      *, *::before, *::after {
        box-shadow: none !important;
        outline: none !important;
        transform: none !important;
      }
      
      /* Reduce bottom margins and padding for compactness */
      div, p, h1, h2, h3, h4, h5, h6 {
        margin-bottom: 3px !important;
        padding-bottom: 2px !important;
      }
      
      /* Table styling */
      table {
        width: 100% !important;
        border-collapse: collapse !important;
        margin: 0 !important;
        padding: 0 !important;
        margin-bottom: 0 !important;
      }
      
      th, td {
        border: none !important;
        padding: 3px 6px !important;
        vertical-align: top !important;
        text-align: left !important;
        margin: 0 !important;
      }
      
      /* Ensure badges print properly with background colors */
      .bg-sky-200, [class*="bg-sky-200"] { background-color: #bae6fd !important; }
      .bg-emerald-100, [class*="bg-emerald-100"] { background-color: #d1fae5 !important; }
      .bg-amber-100, [class*="bg-amber-100"] { background-color: #fef3c7 !important; }
      .bg-indigo-100, [class*="bg-indigo-100"] { background-color: #e0e7ff !important; }
      .bg-purple-100, [class*="bg-purple-100"] { background-color: #f3e8ff !important; }
      .bg-yellow-100, [class*="bg-yellow-100"] { background-color: #fef9c3 !important; }
      .bg-slate-200, [class*="bg-slate-200"] { background-color: #e2e8f0 !important; }
      .bg-teal-100, [class*="bg-teal-100"] { background-color: #ccfbf1 !important; }
      .bg-orange-100, [class*="bg-orange-100"] { background-color: #ffedd5 !important; }
      .bg-cyan-100, [class*="bg-cyan-100"] { background-color: #cffafe !important; }
      .bg-blue-100, [class*="bg-blue-100"] { background-color: #dbeafe !important; }
      .bg-green-100, [class*="bg-green-100"] { background-color: #dcfce7 !important; }
      
      /* Content indentation with reduced spacing */
      .pl-4 { padding-left: 0.8rem !important; }
      .pl-8 { padding-left: 1.5rem !important; }
      .pl-12 { padding-left: 2.2rem !important; }
      
      /* Font styles */
      .text-sm { font-size: 8pt !important; }
      .font-bold { font-weight: bold !important; }
      .font-semibold { font-weight: 600 !important; }
      .italic { font-style: italic !important; }

      /* Highlight for newly added items in print */
      .new-item-print-highlight > td {
          background-color: #f0f9ff !important; /* sky-50, a subtle highlight */
      }
    }
  </style>

<script type="importmap">
{
  "imports": {
    "react/": "https://aistudiocdn.com/react@^19.1.1/",
    "react": "https://aistudiocdn.com/react@^19.1.1",
    "react-dom/": "https://aistudiocdn.com/react-dom@^19.1.1/",
    "immer": "https://aistudiocdn.com/immer@^10.1.1",
    "better-react-mathjax": "https://aistudiocdn.com/better-react-mathjax@^2.3.0"
  }
}
</script>
<link rel="stylesheet" href="/index.css">
</head>
<body class="bg-slate-50">
  <div id="root"></div>
  <script type="module" src="/index.tsx"></script>
</body>
</html>