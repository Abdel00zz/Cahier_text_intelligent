<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Cahier de Textes Interactif</title>
  
  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  
  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Fira+Sans:wght@300;400;500;600;700&family=Roboto+Slab:wght@300;400;500;600;700&family=Inter:wght@300;400;500;600;700&family=Lateef:wght@200;300;400;500;700&family=Poppins:wght@400;500;600;700;800&family=Merriweather:wght@300;400;700;900&display=swap" rel="stylesheet">
  
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
  
  <!-- Tippy.js for Tooltips -->
  <script src="https://unpkg.com/@popperjs/core@2"></script>
  <script src="https://unpkg.com/tippy.js@6"></script>
  
  <style>
  body { font-family: 'Inter', sans-serif; }
  .font-fira { font-family: 'Fira Sans', 'Inter', system-ui, -apple-system, 'Segoe UI', Roboto, sans-serif; }
    h1, h2, h3, h4, h5, h6, .font-slab { font-family: 'Roboto Slab', serif; }
  .font-ar { font-family: 'Lateef', 'Scheherazade New', 'Amiri', system-ui, sans-serif; letter-spacing: 0.1px; }
  /* Chic title fonts for class cards */
  .font-chic { font-family: 'Merriweather', 'Roboto Slab', Georgia, 'Times New Roman', serif; }
  .font-merri { font-family: 'Merriweather', 'Roboto Slab', Georgia, 'Times New Roman', serif; }
  /* Arabic retains Lateef for elegance */
    
    /* Custom Tippy.js theme */
    .tippy-box[data-theme~='custom'] {
        background-color: #1f2937; /* slate-800 */
        color: white;
    }
    .tippy-box[data-theme~='custom'][data-placement^='top'] > .tippy-arrow::before {
        border-top-color: #1f2937;
    }
    .tippy-box[data-theme~='custom'][data-placement^='bottom'] > .tippy-arrow::before {
        border-bottom-color: #1f2937;
    }

    /* Tippy.js shift-away animation */
    .tippy-box[data-animation='shift-away'] {
      transition-property: transform, opacity;
      transition-duration: 250ms;
      transition-timing-function: ease-out;
    }
    .tippy-box[data-animation=shift-away][data-state=hidden]{opacity:0}
    .tippy-box[data-animation=shift-away][data-state=hidden][data-placement^=top]{transform:translateY(10px)}
    .tippy-box[data-animation=shift-away][data-state=hidden][data-placement^=bottom]{transform:translateY(-10px)}
    .tippy-box[data-animation=shift-away][data-state=hidden][data-placement^=left]{transform:translateX(10px)}
    .tippy-box[data-animation=shift-away][data-state=hidden][data-placement^=right]{transform:translateX(-10px)}
    
    /* Animation for modals and notifications */
    @keyframes slide-in-up {
      from { transform: translateY(20px) scale(0.98); opacity: 0; }
      to { transform: translateY(0) scale(1); opacity: 1; }
    }
    
    @keyframes slide-in-up-mobile {
      from { transform: translateY(100%); }
      to { transform: translateY(0); }
    }
    
    .animate-slide-in-up {
      animation: slide-in-up 0.3s ease-out forwards;
    }
    
    @media (max-width: 640px) {
      .animate-slide-in-up {
        animation: slide-in-up-mobile 0.3s ease-out forwards;
      }
    }

    @keyframes fade-in {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    .animate-fade-in {
        animation: fade-in 0.2s ease-out;
    }

    /* Optimizations for mobile touch */
    @media (max-width: 640px) {
      .touch-manipulation {
        touch-action: manipulation;
      }
      
      /* Larger touch targets for mobile */
      button, .cursor-pointer {
        min-height: 44px;
      }
      
      /* Improve scroll performance on mobile */
      .overflow-y-auto {
        -webkit-overflow-scrolling: touch;
        overscroll-behavior: contain;
      }
    }

    /* Animation for config button hint */
    @keyframes pulse-glow {
      0%, 100% {
        box-shadow: 0 0 0 0 rgba(13, 148, 136, 0.7);
      }
      50% {
        box-shadow: 0 0 0 10px rgba(13, 148, 136, 0);
      }
    }
    .animate-pulse-glow {
      animation: pulse-glow 2s infinite;
    }


    /* Date cell animation */
    .date-cell-filled::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 3px;
      background-color: #0d9488; /* teal-600 */
      transform-origin: left;
      animation: draw-line-across 0.5s ease-out forwards;
    }

    @keyframes draw-line-across {
        from {
            transform: scaleX(0);
        }
        to {
            transform: scaleX(1);
        }
    }
    
    /* New item highlight animation */
    @keyframes highlight-fade-out {
      from { background-color: #cffafe; } /* cyan-100 */
      to { background-color: transparent; }
    }
    .new-item-highlight {
      animation: highlight-fade-out 2.5s ease-out forwards;
    }

  /* hide scrollbar track for small chips row (cosmetic) */
  .no-scrollbar::-webkit-scrollbar { display: none; }
  .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

    /* Guide scrollbars (more visible) */
    .guide-scroll::-webkit-scrollbar { width: 14px; }
    .guide-scroll::-webkit-scrollbar-track { 
      background: #e2e8f0; 
      border-radius: 10px; 
      border: 1px solid #cbd5e1;
    }
    .guide-scroll::-webkit-scrollbar-thumb { 
      background: #64748b; 
      border-radius: 10px; 
      border: 2px solid #e2e8f0;
    }
    .guide-scroll::-webkit-scrollbar-thumb:hover { 
      background: #475569; 
    }
    .guide-scroll::-webkit-scrollbar-thumb:active { 
      background: #334155; 
    }
    .guide-scroll { 
      scrollbar-color: #64748b #e2e8f0; 
      scrollbar-width: auto; 
    }

    /* Elegant, chic, fine title styling for class cards */
    .title-chic {
      font-family: 'Merriweather', 'Roboto Slab', Georgia, 'Times New Roman', serif;
      font-weight: 500; /* refined, not too heavy */
      letter-spacing: 0.3px; /* subtle air between letters */
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      text-shadow: 0 1px 1px rgba(0,0,0,0.12);
    }
    .title-ar {
      font-family: 'Lateef', 'Scheherazade New', 'Amiri', system-ui, sans-serif;
      font-weight: 400;
      letter-spacing: 0.2px;
      -webkit-font-smoothing: antialiased;
      text-shadow: 0 1px 1px rgba(0,0,0,0.10);
    }

    /* Print-specific styles */
    @media screen {
      .print-hidden { display: block !important; }
      .print-only { display: none !important; }
    }
    
    @media print {
      @page {
        size: A4;
        margin: 0.7cm;
      }
      
      /* Hide screen content */
      .print-hidden { 
        display: none !important; 
      }
      
      /* Show print content */
      .print-only { 
        display: block !important; 
      }
      
      /* Hide notifications and all interactive elements */
      .notification,
      [class*="notification"],
      .modal,
      [class*="modal"],
      .tooltip,
      [class*="tooltip"],
      .dropdown,
      [class*="dropdown"],
      button,
      input[type="button"],
      input[type="submit"] {
        display: none !important;
        visibility: hidden !important;
      }
      
      body {
        padding: 0 !important;
        margin: 0 !important;
        font-size: 9pt !important;
        line-height: 1.3 !important;
        background-color: white !important;
        color: black !important;
        -webkit-print-color-adjust: exact;
        print-color-adjust: exact;
      }
      
      /* Minimal global resets for print */
      *, *::before, *::after {
        box-shadow: none !important;
        outline: none !important;
        transform: none !important;
      }
      
      /* Reduce bottom margins and padding for compactness */
      div, p, h1, h2, h3, h4, h5, h6 {
        margin-bottom: 3px !important;
        padding-bottom: 2px !important;
      }
      
      /* Table styling */
      table {
        width: 100% !important;
        border-collapse: collapse !important;
        margin: 0 !important;
        padding: 0 !important;
        margin-bottom: 0 !important;
      }
      
      th, td {
        border: none !important;
        padding: 3px 6px !important;
        vertical-align: top !important;
        text-align: left !important;
        margin: 0 !important;
      }
      
      /* Ensure badges print properly with background colors */
      .bg-sky-200, [class*="bg-sky-200"] { background-color: #bae6fd !important; }
      .bg-emerald-100, [class*="bg-emerald-100"] { background-color: #d1fae5 !important; }
      .bg-amber-100, [class*="bg-amber-100"] { background-color: #fef3c7 !important; }
      .bg-indigo-100, [class*="bg-indigo-100"] { background-color: #e0e7ff !important; }
      .bg-purple-100, [class*="bg-purple-100"] { background-color: #f3e8ff !important; }
      .bg-yellow-100, [class*="bg-yellow-100"] { background-color: #fef9c3 !important; }
      .bg-slate-200, [class*="bg-slate-200"] { background-color: #e2e8f0 !important; }
      .bg-teal-100, [class*="bg-teal-100"] { background-color: #ccfbf1 !important; }
      .bg-orange-100, [class*="bg-orange-100"] { background-color: #ffedd5 !important; }
      .bg-cyan-100, [class*="bg-cyan-100"] { background-color: #cffafe !important; }
      .bg-blue-100, [class*="bg-blue-100"] { background-color: #dbeafe !important; }
      .bg-green-100, [class*="bg-green-100"] { background-color: #dcfce7 !important; }
      
      /* Content indentation with reduced spacing */
      .pl-4 { padding-left: 0.8rem !important; }
      .pl-8 { padding-left: 1.5rem !important; }
      .pl-12 { padding-left: 2.2rem !important; }
      
      /* Font styles */
      .text-sm { font-size: 8pt !important; }
      .font-bold { font-weight: bold !important; }
      .font-semibold { font-weight: 600 !important; }
      .italic { font-style: italic !important; }

      /* Highlight for newly added items in print */
      .new-item-print-highlight > td {
          background-color: #f0f9ff !important; /* sky-50, a subtle highlight */
      }
    }
  </style>

<script type="importmap">
{
  "imports": {
    "react/": "https://aistudiocdn.com/react@^19.1.1/",
    "react": "https://aistudiocdn.com/react@^19.1.1",
    "react-dom/": "https://aistudiocdn.com/react-dom@^19.1.1/",
    "immer": "https://aistudiocdn.com/immer@^10.1.1",
    "better-react-mathjax": "https://aistudiocdn.com/better-react-mathjax@^2.3.0"
  }
}
</script>
<link rel="stylesheet" href="/index.css">
</head>
<body class="bg-slate-50">
  <div id="root"></div>
  <script type="module" src="/index.tsx"></script>
</body>
</html>